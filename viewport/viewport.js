!function(e,t){"function"==typeof define&&define.amd?define(["exports"],t):t("undefined"!=typeof exports?exports:e.viewport={})}(this,function(e){var t=[],r=40,o="viewport",n="EventListener",i="add"+n,l="remove"+n,f="getBoundingClientRect",s="top",a="bottom",c="left",p="right",d="Top",v="Left",u="Location",h="Start",m="End",g="Scroll",b="Target",w="scroll",y="resize",x="length",S=window,k=document,E=null,L=Math,N=L.min,B=L.max,C=L.abs,T=function(){var e,n,L,T,z,H,M,R,W,j,q;for(e=0;e<t[x];e++)H=t[e].r.vpl,t[e].r[l](w,H,0),S[l](y,H,0);for(t=[],q=k.getElementsByClassName("section"),e=0;e<q[x];e++){for(R=M=q[e];;){if(T=0,L=R==k.body,!L)for(z=R.className.split(" "),n=0;n<z[x];n++)if(z[n]==o){T=1;break}if(L||T)break;R=R.parentNode}for(j=E,n=0;n<t[x];n++)if(t[n].v==R){j=t[n];break}j||(W=R.scroller||R,j={v:R,r:W,s:[]},W.vpl=function(e){return function(){for(var t=e.r,n=t[f](),i=n[s],l=n[c],y=n[a],S=n[p],k=(y+i)/2,L=(l+S)/2,T=t[w+d]/(t.scrollHeight-n.height),z=t[w+v]/(t.scrollWidth-n.width),H=i+(y-i)*T,M=l+(S-l)*z,R=E,W=E,j=0;j<e.s[x];j++){var q=e.s[j],A=q[f](),D=A[s],F=A[c],G=A[a]-D,I=A[p]-F,J=i-D,K=l-F,O=(M-F)/I,P=(H-D)/G,Q=B(0,C(P-.5)-.5),U=B(0,C(O-.5)-.5),V=Q*Q+U*U,X=-J-r,Y=(A[a]+D)/2-k,Z=-K-r,$=(F+A[p])/2-L;q[o+d+h]=J/G,q[o+d+m]=(y-D)/G,q[o+v+h]=K/I,q[o+v+m]=(S-F)/I,q[o+d+u]=P,q[o+v+u]=O,q[o+g+d+b]=t[w+d]+N(X,Y),q[o+g+v+b]=t[w+v]+N(Z,$),(W===E||W>V)&&(W=V,R=q)}e.v.currentSection=R}}(j),W[i](w,W.vpl,0),S[i](y,W.vpl,0),t.push(j)),j.s.push(M)}for(e=0;e<t[x];e++)j.r.vpl()};"complete"==k.readyState?T():S[i]("load",T,0),e.reset=T});